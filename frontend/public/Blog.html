<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow">
    <meta name="description" content="Блог BoardGameHub - полезные статьи о настольных играх, советы по выбору, обзоры новинок и история настольных игр. Читайте наш блог и становитесь экспертом в мире настолок!">
    <title>Блог о настольных играх | BoardGameHub - статьи, обзоры и советы</title>
    
    <!-- Open Graph метатеги -->
    <meta property="og:title" content="Блог о настольных играх | BoardGameHub">
    <meta property="og:description" content="Полезные статьи о настольных играх, советы по выбору, обзоры новинок и история настольных игр. Станьте экспертом в мире настолок!">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://boardgamehub.ru/blog">
    <meta property="og:image" content="https://boardgamehub.ru/images/blog-og-image.jpg">
    <meta property="og:site_name" content="BoardGameHub">
    
    <!-- Каноническая ссылка -->
    <link rel="canonical" href="https://boardgamehub.ru/blog">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <link rel="icon" type="image/x-icon" href="../../images/icon.png">
    
    <style>
        /* Анимации с учетом prefers-reduced-motion */
        @media (prefers-reduced-motion: no-preference) {
            .hover-lift { transition: transform 0.3s ease, box-shadow 0.3s ease; }
            .hover-lift:hover { transform: translateY(-4px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        }
        
        /* Минимальные размеры для сенсорных элементов */
        .touch-target { min-width: 44px; min-height: 44px; }
        
        /* Компактная шапка для мобильных устройств */
        @media (max-width: 1024px) {
            .compact-header { padding-top: 0.75rem; padding-bottom: 0.75rem; }
        }
        
        /* Адаптивное меню */
        @media (max-width: 768px) {
            .compact-nav {
                flex-wrap: wrap;
                justify-content: center;
                gap: 0.5rem;
            }
            
            .compact-nav li {
                margin: 0 0.25rem;
            }
            
            .compact-nav a {
                font-size: 0.875rem;
                padding: 0.25rem 0.5rem;
            }
        }
        
        @media (max-width: 640px) {
            .compact-nav a {
                font-size: 0.8rem;
                padding: 0.25rem;
            }
            
            .header-icons {
                margin-top: 0.5rem;
            }
        }
        
        /* Позиционирование счетчика корзины */
        .cart-counter {
            position: absolute;
            top: -6px;
            right: -6px;
            background-color: #f59e0b;
            color: black;
            font-size: 0.75rem;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        /* Выравнивание карточек блога */
        .blog-card {
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        .blog-card-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        .blog-card-button {
            margin-top: auto;
        }
        
        /* Стили для загрузки */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f4f6;
            border-top: 4px solid #f59e0b;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body class="bg-white text-gray-900">
    <!-- Header с адаптивной навигацией -->
    <header class="bg-white shadow-lg sticky top-0 z-50 compact-header">
        <div class="container mx-auto px-4 sm:px-6">
            <div class="flex flex-col lg:flex-row justify-between items-center py-3 lg:py-4 gap-3 lg:gap-4">
                <!-- Логотип -->
                <div class="text-xl lg:text-2xl font-black flex items-center">
                    <span class="text-yellow-500 mr-1">♟️</span> 
                    <span>BoardGameHub</span>
                </div>
                
                <!-- Адаптивное меню -->
                <nav class="w-full lg:w-auto">
                    <!-- Десктопное меню -->
                    <ul class="flex flex-wrap justify-center compact-nav space-x-0 lg:space-x-6 xl:space-x-8">
                        <li><a href="ProductCatalog.html" class="text-black font-medium relative pb-1 hover:text-yellow-500 transition-colors duration-300 after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-0 after:h-0.5 after:bg-yellow-500 after:transition-all after:duration-300 hover:after:w-full">Каталог товаров</a></li>
                        <li><a href="Blog.html" class="text-yellow-500 font-medium relative pb-1 after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-full after:h-0.5 after:bg-yellow-500">Блог</a></li>
                        <li><a href="#" class="text-black font-medium relative pb-1 hover:text-yellow-500 transition-colors duration-300 after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-0 after:h-0.5 after:bg-yellow-500 after:transition-all after:duration-300 hover:after:w-full">О нас</a></li>
                        <li><a href="#" class="text-black font-medium relative pb-1 hover:text-yellow-500 transition-colors duration-300 after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-0 after:h-0.5 after:bg-yellow-500 after:transition-all after:duration-300 hover:after:w-full">Доставка</a></li>
                        <li><a href="#" class="text-black font-medium relative pb-1 hover:text-yellow-500 transition-colors duration-300 after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-0 after:h-0.5 after:bg-yellow-500 after:transition-all after:duration-300 hover:after:w-full">Контакты</a></li>
                    </ul>
                </nav>
                
                <!-- Иконки пользователя и корзины -->
                <div class="flex gap-3 lg:gap-4 header-icons">
                    <a href="Bag.html" class="touch-target text-black text-lg lg:text-xl hover:text-yellow-500 transition-colors duration-300 relative flex items-center justify-center">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-counter">0</span>
                    </a>
                    <a href="PersonalAccount.html" class="touch-target text-black text-lg lg:text-xl hover:text-yellow-500 transition-colors duration-300 flex items-center justify-center">
                        <i class="fas fa-user"></i>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Page header -->
    <div class="bg-gray-50 py-8 lg:py-10 mb-8 lg:mb-10">
        <div class="container mx-auto px-4 text-center">
            <h1 class="text-2xl sm:text-3xl lg:text-4xl font-bold mb-3 lg:mb-4">Блог о настольных играх</h1>
            <ul class="flex justify-center list-none text-sm">
                <li class="mx-2 text-gray-600">
                    <a href="index.html" class="text-black hover:text-yellow-500 transition-colors duration-300">Главная</a>
                    <span class="ml-2">/</span>
                </li>
                <li class="mx-2 text-gray-600">Блог</li>
            </ul>
        </div>
    </div>

    <!-- Blog section -->
    <section class="container mx-auto px-4 mb-12 lg:mb-16">
        <div class="flex flex-col lg:flex-row gap-6 lg:gap-8">
            <!-- Main content -->
            <div class="lg:w-2/3">
                <!-- Loading indicator -->
                <div id="loadingIndicator" class="loading">
                    <div class="loading-spinner"></div>
                </div>

                <!-- Articles container -->
                <div id="articlesContainer" class="space-y-6 lg:space-y-8 hidden">
                    <!-- Articles will be dynamically inserted here -->
                </div>

                <!-- No articles message -->
                <div id="noArticlesMessage" class="text-center py-12 hidden">
                    <i class="fas fa-newspaper text-6xl text-gray-300 mb-4"></i>
                    <h3 class="text-xl font-semibold text-gray-600 mb-2">Статьи не найдены</h3>
                    <p class="text-gray-500">Попробуйте изменить параметры поиска или зайдите позже.</p>
                </div>
                
                <!-- Pagination -->
                <div id="paginationContainer" class="flex justify-center gap-2 sm:gap-3 mt-8 lg:mt-12 hidden">
                    <!-- Pagination will be dynamically inserted here -->
                </div>
            </div>
            
            <!-- Sidebar -->
            <div class="lg:w-1/3">
                <!-- Search widget -->
                <div class="bg-white rounded-lg shadow-lg p-4 sm:p-5 lg:p-6 mb-6 lg:mb-8">
                    <h3 class="text-lg sm:text-xl font-bold mb-4 lg:mb-5 pb-2 lg:pb-3 relative after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-8 sm:after:w-10 after:h-1 after:bg-yellow-500">Поиск</h3>
                    <div class="space-y-3">
                        <input type="text" id="searchInput" placeholder="Поиск по блогу..." class="w-full px-3 py-2 sm:px-4 sm:py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent text-sm sm:text-base">
                        <button id="searchButton" class="w-full bg-yellow-500 text-black px-4 py-2 sm:px-6 sm:py-3 rounded font-semibold text-sm sm:text-base transition-all duration-300 hover:bg-yellow-400 touch-target">Найти</button>
                    </div>
                </div>
                
                <!-- Categories widget -->
                <div class="bg-white rounded-lg shadow-lg p-4 sm:p-5 lg:p-6 mb-6 lg:mb-8">
                    <h3 class="text-lg sm:text-xl font-bold mb-4 lg:mb-5 pb-2 lg:pb-3 relative after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-8 sm:after:w-10 after:h-1 after:bg-yellow-500">Категории</h3>
                    <ul id="categoriesList" class="space-y-2 sm:space-y-3">
                        <!-- Categories will be dynamically populated -->
                    </ul>
                </div>
                
                <!-- Popular posts widget -->
                <div class="bg-white rounded-lg shadow-lg p-4 sm:p-5 lg:p-6 mb-6 lg:mb-8">
                    <h3 class="text-lg sm:text-xl font-bold mb-4 lg:mb-5 pb-2 lg:pb-3 relative after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-8 sm:after:w-10 after:h-1 after:bg-yellow-500">Популярные статьи</h3>
                    <ul id="popularPostsList" class="space-y-4 sm:space-y-5">
                        <!-- Popular posts will be dynamically populated -->
                    </ul>
                </div>
                
                <!-- Tags widget -->
                <div class="bg-white rounded-lg shadow-lg p-4 sm:p-5 lg:p-6 mb-6 lg:mb-8">
                    <h3 class="text-lg sm:text-xl font-bold mb-4 lg:mb-5 pb-2 lg:pb-3 relative after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-8 sm:after:w-10 after:h-1 after:bg-yellow-500">Теги</h3>
                    <div id="tagsContainer" class="flex flex-wrap gap-2">
                        <!-- Tags will be dynamically populated -->
                    </div>
                </div>
                
                <!-- Newsletter widget -->
                <div class="bg-white rounded-lg shadow-lg p-4 sm:p-5 lg:p-6">
                    <h3 class="text-lg sm:text-xl font-bold mb-4 lg:mb-5 pb-2 lg:pb-3 relative after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-8 sm:after:w-10 after:h-1 after:bg-yellow-500">Подписка на новости</h3>
                    <p class="text-gray-600 mb-3 sm:mb-4 text-sm sm:text-base">Будьте в курсе новых статей и акций</p>
                    <form class="space-y-3">
                        <input type="email" placeholder="Ваш email" class="w-full px-3 py-2 sm:px-4 sm:py-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent text-sm sm:text-base">
                        <button type="submit" class="w-full bg-yellow-500 text-black px-4 py-2 sm:px-6 sm:py-3 rounded font-semibold text-sm sm:text-base transition-colors duration-300 hover:bg-yellow-400 touch-target">Подписаться</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-black text-white pt-10 lg:pt-14 xl:pt-16 pb-6 lg:pb-8">
        <div class="container mx-auto px-4 sm:px-6">
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 lg:gap-8 xl:gap-10 mb-8 lg:mb-10">
                <div>
                    <h3 class="text-base sm:text-lg font-semibold mb-4 sm:mb-6 text-yellow-500">BoardGameHub</h3>
                    <p class="text-gray-300 mb-4 sm:mb-5 leading-relaxed text-sm sm:text-base">Лучший выбор настольных игр для всей семьи с доставкой по всей России. Присоединяйтесь к нашему сообществу!</p>
                    <div class="flex gap-3 sm:gap-4 mt-4 sm:mt-5">
                        <a href="#" class="touch-target w-8 h-8 sm:w-10 sm:h-10 bg-gray-800 rounded-full flex items-center justify-center transition-all duration-300 hover:bg-yellow-500 hover:text-black" aria-label="ВКонтакте"><i class="fab fa-vk text-sm sm:text-base"></i></a>
                        <a href="#" class="touch-target w-8 h-8 sm:w-10 sm:h-10 bg-gray-800 rounded-full flex items-center justify-center transition-all duration-300 hover:bg-yellow-500 hover:text-black" aria-label="Телеграм"><i class="fab fa-telegram text-sm sm:text-base"></i></a>
                        <a href="#" class="touch-target w-8 h-8 sm:w-10 sm:h-10 bg-gray-800 rounded-full flex items-center justify-center transition-all duration-300 hover:bg-yellow-500 hover:text-black" aria-label="YouTube"><i class="fab fa-youtube text-sm sm:text-base"></i></a>
                        <a href="#" class="touch-target w-8 h-8 sm:w-10 sm:h-10 bg-gray-800 rounded-full flex items-center justify-center transition-all duration-300 hover:bg-yellow-500 hover:text-black" aria-label="Instagram"><i class="fab fa-instagram text-sm sm:text-base"></i></a>
                    </div>
                </div>
                <div>
                    <h3 class="text-base sm:text-lg font-semibold mb-4 sm:mb-6 text-yellow-500">Каталог</h3>
                    <ul class="space-y-2 sm:space-y-3">
                        <li><a href="#" class="text-gray-300 hover:text-yellow-500 transition-colors duration-300 text-sm sm:text-base">Семейные игры</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-yellow-500 transition-colors duration-300 text-sm sm:text-base">Стратегии</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-yellow-500 transition-colors duration-300 text-sm sm:text-base">Детские игры</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-yellow-500 transition-colors duration-300 text-sm sm:text-base">Кооперативные игры</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-yellow-500 transition-colors duration-300 text-sm sm:text-base">Для вечеринок</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-base sm:text-lg font-semibold mb-4 sm:mb-6 text-yellow-500">Информация</h3>
                    <ul class="space-y-2 sm:space-y-3">
                        <li><a href="#" class="text-gray-300 hover:text-yellow-500 transition-colors duration-300 text-sm sm:text-base">О нас</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-yellow-500 transition-colors duration-300 text-sm sm:text-base">Доставка и оплата</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-yellow-500 transition-colors duration-300 text-sm sm:text-base">Контакты</a></li>
                        <li><a href="Blog.html" class="text-gray-300 hover:text-yellow-500 transition-colors duration-300 text-sm sm:text-base">Блог</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-yellow-500 transition-colors duration-300 text-sm sm:text-base">Акции</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-base sm:text-lg font-semibold mb-4 sm:mb-6 text-yellow-500">Контакты</h3>
                    <ul class="space-y-3 sm:space-y-4">
                        <li class="flex items-center gap-3 sm:gap-4 text-gray-300 text-sm sm:text-base"><i class="fas fa-map-marker-alt"></i> Москва, ул. Игровая, 15</li>
                        <li class="flex items-center gap-3 sm:gap-4 text-gray-300 text-sm sm:text-base"><i class="fas fa-phone"></i> +7 (495) 123-45-67</li>
                        <li class="flex items-center gap-3 sm:gap-4 text-gray-300 text-sm sm:text-base"><i class="fas fa-envelope"></i> info@boardgamehub.ru</li>
                    </ul>
                </div>
            </div>
            <div class="pt-6 sm:pt-8 border-t border-gray-800 text-center text-gray-400 text-xs sm:text-sm">
                <p>&copy; 2023 BoardGameHub. Все права защищены.</p>
            </div>
        </div>
    </footer>

    <!-- Firebase and Blog Script -->
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDuYb4O0s7accu6T5MSbJ6WUiSpwnJI6gk",
            authDomain: "gamestore-8a2a3.firebaseapp.com",
            databaseURL: "https://gamestore-8a2a3-default-rtdb.firebaseio.com",
            projectId: "gamestore-8a2a3",
            storageBucket: "gamestore-8a2a3.firebasestorage.app",
            messagingSenderId: "630285121213",
            appId: "1:630285121213:web:6cc7f2cc0350e0f020e9d4",
            measurementId: "G-3EXSGX4EWJ"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // DOM elements
        const articlesContainer = document.getElementById('articlesContainer');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const noArticlesMessage = document.getElementById('noArticlesMessage');
        const paginationContainer = document.getElementById('paginationContainer');
        const searchInput = document.getElementById('searchInput');
        const searchButton = document.getElementById('searchButton');
        const categoriesList = document.getElementById('categoriesList');
        const popularPostsList = document.getElementById('popularPostsList');
        const tagsContainer = document.getElementById('tagsContainer');

        // Global variables
        let allArticles = [];
        let filteredArticles = [];
        let currentPage = 1;
        const articlesPerPage = 4;

        // Format date function
        function formatDate(dateString) {
            const date = new Date(dateString);
            const options = { day: 'numeric', month: 'long', year: 'numeric' };
            return date.toLocaleDateString('ru-RU', options);
        }

        // Format reading time
        function formatReadingTime(minutes) {
            if (minutes === 1) return '1 мин чтения';
            if (minutes >= 2 && minutes <= 4) return `${minutes} мин чтения`;
            return `${minutes} мин чтения`;
        }

        // Create article card HTML
        function createArticleCard(article, id) {
            return `
                <article class="bg-white rounded-lg shadow-lg hover-lift blog-card">
                    <img src="../../images/${article.Image || 'default-article.jpg'}" alt="${article.Title}" class="w-full h-48 sm:h-56 lg:h-64 object-cover" loading="lazy">
                    <div class="p-4 sm:p-5 lg:p-6 blog-card-content">
                        <div class="flex justify-between text-gray-500 text-xs sm:text-sm mb-3 lg:mb-4">
                            <span class="flex items-center gap-1"><i class="far fa-calendar"></i> ${formatDate(article.PublishedAt)}</span>
                            <span class="flex items-center gap-1"><i class="far fa-clock"></i> ${formatReadingTime(article.ReadingTime || 5)}</span>
                            <span class="flex items-center gap-1"><i class="far fa-folder"></i> ${article.Tags || 'Без категории'}</span>
                        </div>
                        <h2 class="text-lg sm:text-xl lg:text-2xl font-bold mb-3 lg:mb-4">${article.Title}</h2>
                        <p class="text-gray-600 mb-4 lg:mb-6 text-sm sm:text-base">${article.Excerpt || 'Статья без описания'}</p>
                        <div class="mt-auto">
                            <a href="article-detail.html?id=${id}" class="inline-block bg-yellow-500 text-black px-4 py-2 sm:px-5 sm:py-2.5 lg:px-6 lg:py-3 rounded font-semibold text-xs sm:text-sm transition-all duration-300 hover:bg-yellow-400 touch-target w-full text-center">Читать далее</a>
                        </div>
                    </div>
                </article>
            `;
        }

        // Create popular post HTML
        function createPopularPost(article, id) {
            return `
                <li class="flex gap-3 sm:gap-4 pb-4 sm:pb-5 border-b border-gray-100 last:border-b-0 last:pb-0">
                    <img src="../../images/${article.Image || 'default-article.jpg'}" alt="${article.Title}" class="w-16 h-16 sm:w-20 sm:h-20 object-cover rounded" loading="lazy">
                    <div>
                        <h4 class="font-semibold mb-1 sm:mb-2 text-sm sm:text-base"><a href="article-detail.html?id=${id}" class="text-black hover:text-yellow-500 transition-colors duration-300">${article.Title}</a></h4>
                        <span class="text-gray-500 text-xs sm:text-sm flex items-center gap-1"><i class="far fa-calendar"></i> ${formatDate(article.PublishedAt)}</span>
                    </div>
                </li>
            `;
        }

        // Create category item HTML
        function createCategoryItem(category, count) {
            return `
                <li class="flex justify-between items-center pb-2 sm:pb-3 border-b border-gray-100 last:border-b-0 last:pb-0">
                    <a href="#" class="text-gray-700 hover:text-yellow-500 transition-colors duration-300 text-sm sm:text-base category-filter" data-category="${category}">${category}</a>
                    <span class="bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs">${count}</span>
                </li>
            `;
        }

        // Create tag HTML
        function createTag(tag) {
            return `
                <a href="#" class="bg-gray-100 text-gray-700 px-2 py-1 sm:px-3 sm:py-2 rounded-full text-xs sm:text-sm transition-all duration-300 hover:bg-yellow-500 hover:text-black touch-target tag-filter" data-tag="${tag}">${tag}</a>
            `;
        }

        // Create pagination HTML
        function createPagination(totalPages) {
            let paginationHTML = '';
            
            if (currentPage > 1) {
                paginationHTML += `<a href="#" class="touch-target w-8 h-8 sm:w-10 sm:h-10 bg-white border border-gray-300 rounded flex items-center justify-center font-semibold text-sm transition-all duration-300 hover:bg-yellow-500 hover:border-yellow-500 pagination-btn" data-page="${currentPage - 1}"><i class="fas fa-chevron-left text-xs sm:text-sm"></i></a>`;
            }
            
            for (let i = 1; i <= totalPages; i++) {
                if (i === currentPage) {
                    paginationHTML += `<a href="#" class="touch-target w-8 h-8 sm:w-10 sm:h-10 bg-yellow-500 border border-yellow-500 rounded flex items-center justify-center font-semibold text-sm transition-all duration-300 hover:bg-yellow-400">${i}</a>`;
                } else {
                    paginationHTML += `<a href="#" class="touch-target w-8 h-8 sm:w-10 sm:h-10 bg-white border border-gray-300 rounded flex items-center justify-center font-semibold text-sm transition-all duration-300 hover:bg-yellow-500 hover:border-yellow-500 pagination-btn" data-page="${i}">${i}</a>`;
                }
            }
            
            if (currentPage < totalPages) {
                paginationHTML += `<a href="#" class="touch-target w-8 h-8 sm:w-10 sm:h-10 bg-white border border-gray-300 rounded flex items-center justify-center font-semibold text-sm transition-all duration-300 hover:bg-yellow-500 hover:border-yellow-500 pagination-btn" data-page="${currentPage + 1}"><i class="fas fa-chevron-right text-xs sm:text-sm"></i></a>`;
            }
            
            return paginationHTML;
        }

        // Filter articles by search term
        function filterArticles(searchTerm = '') {
            if (!searchTerm.trim()) {
                filteredArticles = [...allArticles];
            } else {
                const term = searchTerm.toLowerCase();
                filteredArticles = allArticles.filter(article => 
                    article.Title.toLowerCase().includes(term) ||
                    article.Excerpt.toLowerCase().includes(term) ||
                    (article.Tags && article.Tags.toLowerCase().includes(term))
                );
            }
            
            // Sort by publication date (newest first)
            filteredArticles.sort((a, b) => new Date(b.PublishedAt) - new Date(a.PublishedAt));
            
            currentPage = 1;
            renderArticles();
        }

        // Filter articles by category
        function filterByCategory(category) {
            if (category === 'all') {
                filteredArticles = [...allArticles];
            } else {
                filteredArticles = allArticles.filter(article => 
                    article.Tags && article.Tags === category
                );
            }
            
            currentPage = 1;
            renderArticles();
        }

        // Render articles for current page
        function renderArticles() {
            const startIndex = (currentPage - 1) * articlesPerPage;
            const endIndex = startIndex + articlesPerPage;
            const articlesToShow = filteredArticles.slice(startIndex, endIndex);
            
            if (articlesToShow.length === 0) {
                articlesContainer.classList.add('hidden');
                noArticlesMessage.classList.remove('hidden');
                paginationContainer.classList.add('hidden');
            } else {
                articlesContainer.innerHTML = articlesToShow.map(article => 
                    createArticleCard(article.article, article.id)
                ).join('');
                
                articlesContainer.classList.remove('hidden');
                noArticlesMessage.classList.add('hidden');
                
                // Render pagination
                const totalPages = Math.ceil(filteredArticles.length / articlesPerPage);
                if (totalPages > 1) {
                    paginationContainer.innerHTML = createPagination(totalPages);
                    paginationContainer.classList.remove('hidden');
                } else {
                    paginationContainer.classList.add('hidden');
                }
            }
        }

        // Load articles from Firebase
        async function loadArticles() {
            try {
                loadingIndicator.classList.remove('hidden');
                articlesContainer.classList.add('hidden');
                noArticlesMessage.classList.add('hidden');
                paginationContainer.classList.add('hidden');
                
                const snapshot = await database.ref('Articles').once('value');
                const articlesData = snapshot.val();
                
                allArticles = [];
                
                if (articlesData) {
                    // Convert object to array and add id
                    Object.keys(articlesData).forEach(id => {
                        allArticles.push({
                            id: id,
                            article: articlesData[id]
                        });
                    });
                }
                
                // Set filtered articles to all articles initially
                filteredArticles = [...allArticles];
                
                // Render articles
                renderArticles();
                
                // Update sidebar widgets
                updateSidebarWidgets();
                
            } catch (error) {
                console.error('Error loading articles:', error);
                noArticlesMessage.classList.remove('hidden');
                noArticlesMessage.innerHTML = `
                    <i class="fas fa-exclamation-triangle text-6xl text-gray-300 mb-4"></i>
                    <h3 class="text-xl font-semibold text-gray-600 mb-2">Ошибка загрузки</h3>
                    <p class="text-gray-500">Не удалось загрузить статьи. Пожалуйста, попробуйте позже.</p>
                `;
            } finally {
                loadingIndicator.classList.add('hidden');
            }
        }

        // Update sidebar widgets
        function updateSidebarWidgets() {
            // Update categories
            const categories = {};
            allArticles.forEach(({ article }) => {
                const category = article.Tags || 'Без категории';
                categories[category] = (categories[category] || 0) + 1;
            });
            
            categoriesList.innerHTML = Object.keys(categories)
                .map(category => createCategoryItem(category, categories[category]))
                .join('');
            
            // Update popular posts (top 3 by publication date)
            const popularPosts = [...allArticles]
                .sort((a, b) => new Date(b.article.PublishedAt) - new Date(a.article.PublishedAt))
                .slice(0, 3);
            
            popularPostsList.innerHTML = popularPosts
                .map(({ article, id }) => createPopularPost(article, id))
                .join('');
            
            // Update tags
            const allTags = new Set();
            allArticles.forEach(({ article }) => {
                if (article.Tags) {
                    allTags.add(article.Tags);
                }
            });
            
            tagsContainer.innerHTML = Array.from(allTags)
                .map(tag => createTag(tag))
                .join('');
        }

        // Event listeners
        function initializeEventListeners() {
            // Search functionality
            searchButton.addEventListener('click', () => {
                filterArticles(searchInput.value);
            });
            
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    filterArticles(searchInput.value);
                }
            });
            
            // Category filter
            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('category-filter')) {
                    e.preventDefault();
                    const category = e.target.dataset.category;
                    filterByCategory(category);
                }
            });
            
            // Tag filter
            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('tag-filter')) {
                    e.preventDefault();
                    const tag = e.target.dataset.tag;
                    searchInput.value = tag;
                    filterArticles(tag);
                }
            });
            
            // Pagination
            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('pagination-btn')) {
                    e.preventDefault();
                    currentPage = parseInt(e.target.dataset.page);
                    renderArticles();
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
            });
        }

        // Initialize the blog
        document.addEventListener('DOMContentLoaded', () => {
            initializeEventListeners();
            loadArticles();
        });
    </script>
     <script src="cart.js"></script>
</body>
</html>